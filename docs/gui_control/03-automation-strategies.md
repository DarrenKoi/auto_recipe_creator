# GUI 제어 전략 및 베스트 프래티스

산업용 장비(CD-SEM) 자동화는 작은 실수가 큰 손실로 이어질 수 있으므로, 보수적이고 안전한 전략이 필요합니다.

## 1. 신뢰성 높은 제어 전략

### 1.1 "보고-생각하고-행동하기" (Observe-Plan-Act)
단순 매크로처럼 `클릭 -> 1초 대기 -> 클릭` 방식을 지양하고, 매 단계마다 화면 상태를 확인해야 합니다.
1.  **Observe:** 화면 캡처 및 VLM/객체 분석.
2.  **Plan:** 목표 상태와 현재 상태 비교.
3.  **Act:** 최소한의 입력 수행.
4.  **Verify:** 입력이 성공적으로 반영되었는지 다시 확인.

### 1.2 안전 모드 (Safe Mode) 구현
개발 단계에서는 실제 마우스를 움직이지 않고, 어디를 클릭하려고 했는지 화면에 표시만 해주는 모드가 필요합니다.
- `automation/rcs/run_login.py`에서 `--live` 플래그를 사용하는 방식이 좋은 예시입니다.

## 2. 에러 핸들링

- **Retry Logic:** 네트워크 지연으로 인해 클릭이 씹힐 수 있습니다. 최대 3회 정도 재시도 로직을 포함하세요.
- **Fail-safe:** 치명적인 에러 발생 시 모든 동작을 멈추고 마우스/키보드 제어권을 즉시 반환해야 합니다 (예: `PyAutoGUI`의 Fail-safe 기능 - 마우스를 화면 구석으로 밀면 중단).
- **Logging:** 모든 행동(클릭 좌표, 입력 텍스트, 당시 화면 스크린샷)을 로그로 남겨 사후 분석이 가능하게 하세요.

## 3. 원격 제어(RCS) 특화 팁

1.  **키보드 포커스:** 입력 전 반드시 해당 입력창을 클릭하여 포커스를 확보하세요.
2.  **특수키 주의:** 원격 환경에서는 `Alt`, `Ctrl`, `Shift` 키가 눌린 상태로 고정되는 "Sticky Key" 현상이 자주 발생합니다. 작업 종료 시 모든 특수키를 명시적으로 Release 하세요.
3.  **해상도 고정:** 원격 접속 환경에 따라 해상도가 변하면 모든 좌표 기반 로직이 깨집니다. 항상 일정한 해상도에서 실행되도록 강제하세요.

## 4. Human-in-the-loop
모든 것을 자동화하려 하지 마세요. 90%의 반복 작업은 AI가 하고, 결정적인 판단(예: 레시피 최종 승인)은 사람이 확인하는 구조가 가장 안전합니다.
